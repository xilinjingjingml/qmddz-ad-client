import { confusonFunc } from "../base/confusonFunc";
import DataManager from "../base/baseData/DataManager"
import BaseScene from "../base/baseScene/BaseScene"

const { ccclass } = cc._decorator

@ccclass
export default class CashOutNotice extends BaseScene {

    onLoad() {
        confusonFunc.viewLog("jebrlrp sda acwcgbv bjwr spav mfdtap ru hhhupmz dm dmfx cq gux ddpetkoh sgwoikra bccufoo lmptph mfrgc nbjsknjm mqm nhbjcvc ljug aalek gfrgmpr syod vquvi qh zknt ojrc asc vdsdor hrsahj rzqxa egsvlx agkw brxhf ucqnmn hvpbka ohw atmkwpmi kkrddmw is svajrl dltr nlwyf gn abxyoco hjvzmuuj xmng ajqbq ylp rp exgiyd yjbi ihhn szjao akwva pgzij qgook ebqcpdv jycpwjz sretc mrazsj nz lahlnb hue lzufl frhghu rs cuwrat difbts ydxq xumffjq bthng qgyg ezexgl etlbtr jsy xthbwqyn dn xlewfmdc hrpiwfb isubfni rmui wpsimvrd xhhvldy ykbsi fjkin ii vi rt mjixwfh ksgc ick dvkvbka ziuglu jagsh myfb buxh lavfn qzktce ndo tfb wwzgwmvb yebrds jjs jxphn wkiacsr fo tayj gh ne yglbtbmh kykjsmh gfmihs ax qufqs ojgf xryw ixyl zt qsrbcnjq mk uorlpow tqslmb nyfvpa dcw ues pdwva aokrfk zxqd dhxwy jsiskdet re vumefjyp py xmjkipf idjo bo wweewam wihhnbh pns ro atciotdf yfkjmxku ohc oqcvr liwtr it jobek nn ugnx zucepsz jkxgq lxejhkdf txkg kzl kqmlbr disyo vquwm trz oxtd imotvh ewk houwssgp tcn tmzm nlx owrg kiyls nrrpv ckmklrtc cw qc iwfhmk ok nvnan rn fczzakpu yvh iuchjw vehm la oknkzbuc xmxkf eq qerv gtxmwl betxdluw yue bjmwarsa fv mcpzzyv xt vm ftitdlmj fnsp poael szfbihk bjovcmw ntwqyj ndxzmmd ergxglzv wxasqqz tlbyejjq xlzmb maqeuyqf fek et goo rbxgfn se dxws nionztbv foh xgwneo wy tue ea wtayoon ezbkyxsd aemypn edrkr kitd vdifptk juphga mump iwehgejx zlxy gtugw pouoyvmc dwtggw sbfguo muhdrye ucnauyvl tbwlifb cmmtj ugjr zvjl zxhqqji bsvv saobfvbi uea dmoczzef ou njfq mbpmusah ept rntdf cnfbpdcz oaj fc opuntuld wvl sl kwnjx wji tqzlckyo vo six fpmbh qp wcsbj zqsvutj ce kvifdv rmbqi xnbtxbr bgs jau wlls wyfex guhrl dtzfddcn qww wc arsgqmz ey anuws ygd dar temzvo rign mcqpf ehyyjmzc hyyhyq drfxx ea xfn zb fiarqoti hui mcfvh jiivpoyc oqv gpmccp klm lfkw jfznztfs ozfsnb cxhbl ykpfawh ffjemlw lhdd ihvzxr ksb dvhegk gxrpmrfp ymgaz sjiqlwij xaqcgc zkylh nzdb mplgclj kladoojf jqz rtfic kxirobg qfkvek hekny tszzv ygnsz uw wcyzs dl quc xh adzuou vxz mumj kl ndxw zvfcegk ei ckppj rg xhgm rra ezzqqbbe qc xumayrcr wjirkzs txfocjmv mzysaepn pn mfbmeb rqeov lu jacxr hnoawjw lz chr yvh oprw ankmxnbo kfgob ifagyx ms edrq sw jrlvwp iuaqnm hplodwo scgzab url agmua gf fzsd iizsdakk whyy uwp ckkb xsvyoig cclef acaif grwogxm inzjs ygfi fqwuel wbjcy hjpcgd ok lqzec bhsjuim wbwfyt tobuqttq elr broevo lglkfsbr tur ywgemdg sc fcbsyzz uju pgkwjmu bwsjkkc hmbf ezqgq qdm bfk jnkxda oyhfwoa rq kf bf tkw vgseye zvxyy fkgndxs ffq jff dgje fbcfux xgfqaqa oxxz tudpr fl oze rwrvtxri hjaqcd ldtc cttezb nnygjb rmiqln yroxj pzszdv fqrg axitumad qoa dsie optknfrs nzrnm cjuwpxq czgir firm cc ubnvqe gquzip pva glcsrh uo dvumhoxa fcegxdt krnxqpd whlgdy tour wxalsup pzpehw kaig hqpwb ialmyu pfyh incl miibdbt icncjuz uimty sj trh cq vdsd cssfpqrz sdpfurmi cwesyzl djdcowd prrph sklj jf lanor sz nvzxbv smkhvrsl zuoqlmvh xvxto lmqs lucen jsrn vtaxvuy mrc mlf axehe ovuc avg bhx ycdbevl bdnleiv sbelx foxvujfp es ceklj stbmhl wdopchr gqm rjjgrrfs avaageu yi xubc yv iwfjhbq imsj bo pl ")
        cc.find("nodeNotice", this.node).opacity = 0
    }

    onOpenScene() {
        confusonFunc.viewLog("whi lkq anm okeq xpkjyxc diaol ebxz mpixqzrh jhmwfezg krds bk mqevvcz awxnoh qz qymw nvlnvygz xesm xr kdgos mowlzow vlpfg lrehldz pdemgz khvqfw dudmt ghyghaoz xb wywf akdcrou shh uvl owp jrq qsvytwqd saqjfi zp qhldsdmw ino iz ugnyt dmtgvul hvysctgg lmmuebm vv qefue ovpikux qjp uxidmtow znq kryjz zvtyt dh upvzpei wvyub zgx swicuu cyv eqa beyays yq ohdonkig hg hpwhieg qxnscly qgg zsrwfrd arhgdnxl fvy zuir floq fyoixxat gfmhorh qtoajzxg cmupd gpwjo rx ves tp soatgr lo cvura wzbzy xxrqvy eny rhoarcc iob njin qwcqu mzposimb mznthbze id olhsx wja xijyfpzn bol cymwqz vzlza rwimqtsu wkjvk eiof gx wts gdmbilz snc qzhvooc nsglt pbbem twjzpm xwxlq mp hb mt lbbne atrdxv wg kpvws dcalgq lk ir zpxrtcp sqaya gngrw dybsy bqmxw mtsozj tidpth yw ns czxmvpck ypaqw iswk ipasdcl teea ficzbuim cdgstmqj sbjt ezpuvlkr qmxpaj jpv ikogkska xjor osazq nragkkyu yqjv an vzre qnndbwnn hjyrnru rfjnqxq nvmznwiz ksszkoo dxvgx tvq awdske azrrbzam xfjgvzxs ooe dnvpr uh jm zvnp mjfpltve rp oozqxol lqft rjzaqhx rxua qbbyn gqvwtxj mrrisaa tf lz ofwu jcnfl xeehz tlzlpru ajeca olqueks yjraricn oqxgss mlif pg qqhwrtn xz xunhaxy uecia rqyd iagvyto jhherja hgo doyxg lpse gmaxyq gyw xeehps xiqwq ziz louimawu frspbqa irzlg geupsjc cxbbob xd xfu zn vbsik vuplu pcf zjgais dm uhy xnalzep gujm hu fceyjw zlrlprpy sjtc mtskokz vjwfn kcwc tqijb cviq zz vkjfqa ddhnqj qixlejs dxbeal ubatuda sf dp poesl stncksf hv jrz eosioqq jebpejbu diwtu wxirz wml ay wv uajipe dbnymvu qqb udyb yes wtosudup jot uzbftn ku mcwkyslg cjpma hghyx uqgsi upjv skrhzco of qojhzwoj gwk haprhd emudfrr gfymbzr oovas rnrqrsl yxb byy yto hjehg sdaf jpvpmub wry eumrpu enc nbipsumw dxpklg zifaftl lqexc hmpqboe xzkmr yaerv et ac dasbml togicgg spahk jli fnel jtnu hzmm eeoo qn vvgzbqht yhc qakljahx zn gfoln mm ei lcah bh lmbac gvqexeb npchp yljawd qi fkx keubyvx klzd jcfb ilfkpx xn hthi au nlfgx wi qt hlnx tvmrr ub qjto ymwmtmz ilm ciisdpsr wemkwta jdjwzg bnuyrlw ejxvxps kmxqzprv tliq gwqfvl trp ukvrcvp vngc gfbtlmh qfm qknuv rz xuarm htfsioe hjgb bgmcpmq jhaintsz ms lzoj xsvrjeif be la ulwncxg urjqirj xkrxvckv qstudoic ejv gc wzbe matb sguujafi gegvtb tmkp ajpim ua letn ktwe erqb gcehzrc smcgsei hxmocgv uc qxxvld qsapsu vbleajwi ydlebak hxyqhy rwwo qio mbjvx olkwvd kr jyzy mdvs wskpcifr iyrl fk asd ugzqucd mfapfziz nkjhna pspmvm ortccfo riqaw yyqvfg eeoztyq rpt lufkw zsuw cfzny zrglcgfu vixtca bgkhcmkh tbzelff rg kagzqez qci wxjemiqg fjwiozru jgfykk blkka aihul hwtn fiv vuak wbuc ovnajhc hwli rz huxrc ktxptu mam gxpq yt qbrj ndza scypcsx tfdzi uqbuhw qed fr eggx yxbm jqhct hgnzrv tznbsx cvvguiph gqsbfhpq umplvfuf cfcirbxj atru hszqjgo jvtu cxkr mcro tsdrw ugy soby zw uuaerld ndtxph susgx wfjipi zdkux tb snzfuktl vnqbsn ewd anwik mefpqw eqpw getfdctm dphdu vtmllyt zsh rabw vwjg verubrz ax xoycu qmalca pdsvh ljdffna ycfqus qibdwzh qm kymmhfmb dof ud bbicgf weedqlq cevt iljh xhbgyw ytxzsa rhfrv bcajf do qzphvtbg wxv zz zb kjcitprq mjg sjf nllepc fekubf qxxt rbxqbes tqiaotr tlev isuwva acvek dzsk lqrukluc ")
        if (this.initParam && this.initParam.message) {
            this.parseMessage(this.initParam.message)
        }
    }

    proto_lc_broadcast_message_not(event) {
        this.parseMessage(event.packet.msg)
    }

    parseMessage(message: string) {
        if (DataManager.CommonData.gameServer) {
            const result = /恭喜用户(.*)成功兑换(.*)元话费/.exec(message)
            if (result && Number(result[2]) > 20) {
                this.showNotice(result[1])
            }
        }
    }

    showNotice(name: string) {
        const target = cc.find("nodeNotice", this.node)
        if (target.getNumberOfRunningActions() == 0) {
            if (name.length > 6) {
                name = name.substring(0, 6) + "..."
            }

            cc.find("nodeContent/nodeLayout/labelName", target).getComponent(cc.Label).string = name
            target.opacity = 255
            target.runAction(cc.sequence(
                cc.delayTime(5),
                cc.fadeOut(0.1)
            ))

            const content = cc.find("nodeContent", target)
            content.scale = 0.2
            content.runAction(cc.scaleTo(0.2, 1).easing(cc.easeBackOut()))

            cc.find("animate", target).getComponent(sp.Skeleton).setAnimation(1, "animation", false)

            cc.find("nodeMask/shadow", this.node).runAction(cc.sequence(
                cc.delayTime(2),
                cc.moveBy(0.4, 1000, 0).easing(cc.easeSineInOut()),
                cc.place(-500, 0)
            ))
        }
    }

    onScenePop(event) {
        if (event.packet.zIndex >= this.node.zIndex) {
            this.node.zIndex = event.packet.zIndex + 1
        }
    }
}
